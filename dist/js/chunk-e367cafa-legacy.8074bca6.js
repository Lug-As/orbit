(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e367cafa"],{"25c7":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile__offer profile__questionnaire profile__contant tab-4"},[!t.userLoading&&t.user.verifyed?s("div",{staticClass:"profile__offer-row profile__questionnaire-row"},[s("div",{staticClass:"profile__questionnaire-create"},[s("button",{staticClass:"profile__questionnaire-create-button button-grand-black",on:{click:t.toggleCreateMode}},[s("span",{staticClass:"big_char",class:{"big_char-cross":t.createMode}},[t._v("+")]),t.createMode?[t._v(" Закрыть форму ")]:[t._v(" Добавить предложение ")]],2)]),s("transition",{attrs:{name:"slide-up-down"}},[t.createMode?s("project-form",{on:{submit:t.createProject}}):t._e()],1),s("div",{staticClass:"profile__questionnaire-accounts"},[s("div",{staticClass:" profile__questionnaire-accounts-row"},[t._m(0),t.projectLoading?s("preloader"):t.userProjects&&t.userProjects.length?s("div",{staticClass:"offers__project-list"},t._l(t.userProjects,(function(e){return s("div",{staticClass:"offers__proposal-body"},[s("div",{staticClass:"offers__proposal-body-title"},[s("div",{staticClass:"offers__title-info"},[s("router-link",{attrs:{to:{name:"Project",params:{id:e.id}},custom:""},scopedSlots:t._u([{key:"default",fn:function(i){var o=i.navigate;return[s("h2",{staticClass:"offers__info-text cursor",on:{click:o}},[t._v(t._s(e.name))])]}}],null,!0)})],1),s("div",{staticClass:"offers__title-price price-info"},[s("p",{staticClass:"offers__price-text "},[t._v("Желаемый бюджет:")]),s("span",{staticClass:"offers__price-value"},[t._v(t._s(e.budget.toLocaleString())+" ₽")])])]),s("div",{staticClass:"offers__proposal-item details"},[s("div",{staticClass:"offers__proposal-item-info"},[s("p",{staticClass:"offers__details-text"},[t._v(" "+t._s(t._f("cut")(e.text))+" ")])])]),s("div",{staticClass:"offers__proposal-item region"},[s("div",{staticClass:"offers__proposal-item-info justify-item"},[s("div",{staticClass:"offers__proposal-item-button"},[s("div",{staticClass:"offers__proposal-item-button-row"},[s("div",{staticClass:"offers__title-price price-button"},[s("p",{staticClass:"offers__price-text"},[t._v("Желаемый бюджет:")]),s("span",{staticClass:"offers__price-value"},[t._v(t._s(e.budget.toLocaleString())+" ₽")])])]),s("div",{staticClass:"offers__item-button"},[s("button",{staticClass:"button-grand-black big",on:{click:function(s){return t.deleteProject(e.id)}}},[t._v(" Удалить предложение ")])])])])])])})),0):[s("p",{staticClass:"empty-result-text"},[t._v("У вас пока нет опубликованных рекламных предложений")])],s("div",{staticClass:"objects-pagination"},[s("pagination",{attrs:{data:t.userProjectsPagination,limit:2},on:{"pagination-change-page":t.changePage}})],1)],2)])],1):t._e()])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile__questionnaire-accounts-row-title"},[s("h2",{staticClass:"profile__offer-accounts-row-title-h2 profile__questionnaire-accounts-row-title-h2"},[t._v(" Актуальные предложения работы ")])])}],r=(s("b0c0"),s("f152")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile__questionnaire-body"},[s("div",{staticClass:"profile__offer-body-row profile__questionnaire-body-row"},[t._m(0),s("div",{staticClass:"profile__offer-item profile__questionnaire-item"},[s("div",{staticClass:"profile__questionnaire-item-info"},[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"profile__questionnaire-item-info-input",attrs:{type:"text"},domProps:{value:t.name},on:{blur:[t.$v.name.$touch,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.name=e.target.value.trim())}}}),t.$v.name.$error?s("p",{staticClass:"red account_form__error"},[t.$v.name.required?t._e():[t._v(" Поле обязательно для заполнения ")],t.$v.name.maxLength?t._e():[t._v(" Длина названия не должна превышать "+t._s(t.$v.name.$params.maxLength.max)+" символов ")]],2):t._e()]),s("div",{staticClass:"profile__questionnaire-item-info"},[t._m(2),s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.text,expression:"text",modifiers:{trim:!0}}],staticClass:"profile__questionnaire-item-info-textarea",domProps:{value:t.text},on:{blur:[t.$v.text.$touch,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.text=e.target.value.trim())}}}),t.$v.text.$error?s("p",{staticClass:"red account_form__error"},[t.$v.text.required?t._e():[t._v(" Поле обязательно для заполнения ")],t.$v.text.maxLength?t._e():[t._v(" Длина описания не должна превышать "+t._s(t.$v.text.$params.maxLength.max)+" символов ")]],2):t._e()]),s("div",{staticClass:"profile__questionnaire-item-info"},[t._m(3),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.budget,expression:"budget",modifiers:{number:!0}}],staticClass:"profile__questionnaire-item-info-input",attrs:{type:"text"},domProps:{value:t.budget},on:{keydown:t.resolveInputKeys,blur:[t.$v.budget.$touch,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.budget=t._n(e.target.value))}}}),t.$v.budget.$error?s("p",{staticClass:"red account_form__error"},[t.$v.budget.required?t._e():[t._v(" Поле обязательно для заполнения ")],t.$v.budget.minValue?t._e():[t._v(" Бюджет должен быть больше 0 ")],t.$v.budget.maxValue?t._e():[t._v(" Бюджет должен быть меньше "+t._s((t.$v.budget.$params.maxValue.max+1).toLocaleString())+" ")]],2):t._e()]),s("div",{staticClass:"profile__questionnaire-item-info"},[t._m(4),s("v-select",{staticClass:"main__vue-select ac-proj-form__select",attrs:{label:"name",options:t.allTypes,reduce:function(t){return t.id},multiple:""},model:{value:t.ad_types,callback:function(e){t.ad_types=e},expression:"ad_types"}},[s("span",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("Ничего не найдено")])])],1),s("div",{staticClass:"profile__questionnaire-item-info"},[s("h2",{staticClass:"profile__questionnaire-item-info-h2"},[t._v(" Регион ")]),s("v-select",{staticClass:"main__vue-select main__vue-select--region ac-proj-form__select",attrs:{label:"name",options:t.allRegions,reduce:function(t){return t.id},selectable:function(t){return!t.hasOwnProperty("group")}},scopedSlots:t._u([{key:"option",fn:function(e){var i=e.group,o=e.name;return[i?s("div",{staticClass:"group"},[t._v(" "+t._s(i)+" ")]):[t._v(" "+t._s(o)+" ")]]}}]),model:{value:t.region,callback:function(e){t.region=e},expression:"region"}},[s("span",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("Ничего не найдено")])]),s("span",{staticClass:"profile__offer-item-info-span"},[t._v("Заполните поле, если ваша реклама привязана к региону.")])],1),s("div",{staticClass:"profile__questionnaire-item-info"},[s("h2",{staticClass:"profile__questionnaire-item-info-h2"},[t._v(" Желаемая аудитория ")]),s("div",{staticClass:"main__details-from-to"},[s("div",{staticClass:"main__details-from"},[s("p",{staticClass:"main__details-text"},[t._v("от")]),s("div",{staticClass:"main__details-input"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.followers_from,expression:"followers_from",modifiers:{number:!0}}],staticClass:"profile__details-input-small main__details-input-small",domProps:{value:t.followers_from},on:{keydown:t.resolveInputKeys,input:function(e){e.target.composing||(t.followers_from=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),s("div",{staticClass:"main__details-to"},[s("p",{staticClass:"main__details-text"},[t._v("до")]),s("div",{staticClass:"main__details-input"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.followers_to,expression:"followers_to",modifiers:{number:!0}}],staticClass:"profile__details-input-small main__details-input-small",domProps:{value:t.followers_to},on:{keydown:t.resolveInputKeys,input:function(e){e.target.composing||(t.followers_to=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),s("p",{staticClass:"profile__offer-deteilds-text main__details-text"},[t._v("Подписчиков")])])]),s("span",{staticClass:"profile__offer-item-info-span"},[t._v("Заполните поле, если вы знаете сколько должно быть подписчиков у блогера.")])]),s("div",{staticClass:"profile__offer-item-button-create profile__questionnaire-item-button-create"},[t._m(5),s("button",{staticClass:"profile__offer-item-button profile__questionnaire-item-button button-grand-black",attrs:{disabled:this.$v.$invalid},on:{click:t.submit}},[t._v(" Создать предложение ")]),s("span",{staticClass:"profile__offer-item-info-span"},[t._v(" Внимание! Все предложения модерируются. Если предложение не соответствует нашим правилам, администраторы вправе удалить предложение. ")])])])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile__offer-body-avatar"},[i("picture",[i("source",{attrs:{srcset:s("44f6"),type:"image/webp"}}),i("img",{attrs:{src:s("f31a"),alt:""}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"profile__questionnaire-item-info-h2"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" Заголовок предложения ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"profile__questionnaire-item-info-h2"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" Описание предложения ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"profile__questionnaire-item-info-h2"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" Бюджет "),s("span",{staticClass:"secondary"},[t._v("(в руб.)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"profile__questionnaire-item-info-h2"},[t._v("Вид рекламы "),s("span",{staticClass:"secondary"},[t._v("(можно выбрать несколько)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("span",{staticClass:"red"},[t._v("*")]),t._v(" Обязательные поля")])}],l=s("b5ae"),c=s("40df"),u={name:"ProjectForm",data:function(){return{name:null,text:null,budget:null,followers_from:null,followers_to:null,ad_types:[],region:null}},computed:{allTypes:function(){return this.$store.getters.types},allRegions:function(){return this.$store.getters.regions}},methods:{submit:function(){if(this.validate()){var t={name:this.name,text:this.text,budget:this.budget,followers_from:this.followers_from,followers_to:this.followers_to,ad_types:this.ad_types,region_id:this.region};this.$emit("submit",t)}},validate:function(){return this.$v.$touch(),!this.$v.$invalid}},validations:{name:{required:l["required"],maxLength:Object(l["maxLength"])(250)},text:{required:l["required"],maxLength:Object(l["maxLength"])(3e3)},budget:{required:l["required"],integer:l["integer"],maxValue:Object(l["maxValue"])(999999),minValue:Object(l["minValue"])(1)}},mounted:function(){this.$store.dispatch("loadTypes"),this.$store.dispatch("loadRegions")},mixins:[c["a"]]},_=u,f=s("2877"),d=Object(f["a"])(_,a,n,!1,null,null,null),p=d.exports,m={name:"ProfileProjects",data:function(){return{createMode:!1}},title:"Мои рекламные предложения",components:{ProjectForm:p,Preloader:r["a"]},computed:{user:function(){return this.$store.getters.user},userLoading:function(){return this.$store.getters.userLoading},userProjects:function(){return this.$store.getters.userProjects},userProjectsPagination:function(){return this.$store.getters.userProjectsPagination},projectLoading:function(){return this.$store.getters.projectLoading}},methods:{toggleCreateMode:function(){this.createMode=!this.createMode},loadUserProjects:function(){this.$store.dispatch("loadUserProjects",{page:this.page})},createProject:function(t){var e=this;this.$store.dispatch("createProject",t).then((function(){e.toggleCreateMode(),e.changePage()||(e.scrollToTop(390),e.loadUserProjects())})).catch((function(){alert("Произошла ошибка отправки формы. Повторите позже.")}))},deleteProject:function(t){confirm("Вы точно хотите удалить рекламное предложение? Восстановить его будет невозможно.")&&this.$store.dispatch("deleteProject",t)},changePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e!==this.page&&(this.scrollToTop(300),this.$router.push({name:this.$route.name,query:{page:e}}).then((function(){return t.loadUserProjects()})),!0)},scrollToTop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.scrollTo({top:t,behavior:"smooth"})},starterFunction:function(){this.user.verifyed&&(this.userProjects.length&&this.page===this.userProjectsPagination.current_page||this.loadUserProjects())}},mounted:function(){this.user?this.starterFunction():this.$onUserLoad.hook(this.starterFunction)}},v=m,g=Object(f["a"])(v,i,o,!1,null,null,null);e["default"]=g.exports},"40df":function(t,e,s){"use strict";s("caad"),s("8ba4"),s("a9e3");e["a"]={methods:{resolveInputKeys:function(t){var e=[8,46,37,38,39,40,116,13];if(!e.includes(t.keyCode)){var s=t.key;Number.isInteger(parseInt(s))||(t.returnValue=!1,t.preventDefault&&t.preventDefault())}}}}},"44f6":function(t,e,s){t.exports=s.p+"img/cosmonavt.2006315b.webp"},caad:function(t,e,s){"use strict";var i=s("23e7"),o=s("4d64").includes,r=s("44d2");i({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},f31a:function(t,e,s){t.exports=s.p+"img/cosmonavt.2b419bdd.png"}}]);