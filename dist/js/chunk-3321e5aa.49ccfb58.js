(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3321e5aa"],{"610c":function(e,i,t){},8403:function(e,i,t){"use strict";var s=t("bc3a"),a=t.n(s);const l=()=>a.a.post("email/resend"),o=(e,i,t,s)=>a.a.post("email/verify/"+String(e)+"/"+String(i),null,{params:{expires:String(t),signature:String(s)}});i["a"]={async resendEmailVerification(){return await l()},async verifyEmail(e,i,t,s){return await o(e,i,t,s)}}},9644:function(e,i,t){"use strict";t("610c")},c66d:function(e,i,t){"use strict";t.r(i);var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("section",{staticClass:"profile"},[t("div",{staticClass:"container"},[t("div",{staticClass:"profile__tab-menu"},[t("h2",{staticClass:"profile__main-title"},[e._v("Личный кабинет")]),t("ul",{staticClass:"profile__tab-menu-ul"},[t("router-link",{staticClass:"profile__tab-menu-ul-li profile__tab-menu-ul-li-drop",attrs:{to:{name:"Profile"},"active-class":"choice",exact:!0}},[t("div",{staticClass:"profile__tab-menu-li-body"},[t("span",{staticClass:"profile__tab-menu-li-link"},[e._v("Мои данные")])])]),t("router-link",{staticClass:"profile__tab-menu-ul-li profile__tab-menu-ul-li-drop",attrs:{to:{name:"ProfileNotices"},"active-class":"choice"}},[t("div",{staticClass:"profile__tab-menu-li-body"},[t("span",{staticClass:"profile__tab-menu-li-link"},[e._v("Уведомления")]),e.noticesCount?t("span",{staticClass:"profile__tab-menu-li-span"},[e._v(e._s(e.noticesCount))]):e._e()])]),t("li",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideMobileMenu,expression:"hideMobileMenu"}],staticClass:"profile__tab-menu-ul-li profile__tab-menu-ul-li-last",class:{"profile__tab-menu-ul-li-hover":e.displayMenu},on:{mouseenter:e.showDesktopMenu,mouseleave:e.hideDesktopMenu,click:e.toggleMobileMenu}},[t("span",{staticClass:"profile__tab-menu-li-link black-arrow"},[e._v("Разместить")]),t("transition",{attrs:{name:"fade"}},[e.displayMenu?t("ul",{staticClass:"profile__tab-menu-ul-drop",on:{click:e.hideDesktopMenu}},[t("router-link",{attrs:{to:{name:"ProfileAccounts"},custom:""},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.navigate,a=i.isActive;return[t("li",{staticClass:"profile__tab-menu-ul-li profile__tab-menu-ul-li-drop",class:{choice:a},on:{click:s}},[t("span",{staticClass:"profile__tab-menu-li-link"},[e._v("Анкету блогера")])])]}}],null,!1,4016112372)}),t("router-link",{attrs:{to:{name:"ProfileProjects"},custom:""},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.navigate,a=i.isActive;return[t("li",{staticClass:"profile__tab-menu-ul-li profile__tab-menu-ul-li-drop",class:{choice:a},on:{click:s}},[t("span",{staticClass:"profile__tab-menu-li-link"},[e._v("Рекламное предложение")])])]}}],null,!1,493015923)})],1):e._e()])],1)],1)]),e.userLoading||e.user.verifyed?e._e():t("div",{staticClass:"profile__confirmation"},[t("div",{staticClass:"profile__confirmation-row"},[e._m(0),t("div",{staticClass:"profile__confirmation-button"},[e.mailSending?t("preloader",{attrs:{small:""}}):t("button",{staticClass:"button-grand-black",on:{click:e.resendVerification}},[e._v(" Отправить повторно ")])],1)])]),t("br"),e.userLoading?t("preloader"):t("router-view")],1)])},a=[function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"profile__confirmation-text"},[t("p",{staticClass:"profile__confirmation-text-p"},[e._v(" Чтобы создавать заявки и получать предложения - подтвердите свою почту. Мы отправили вам сообщение на E-mail. ")]),t("p",{staticClass:"profile__confirmation-text-p secondary"},[e._v(" (Обновите страницу, если вы уже подтвердили почту) ")])])}],l=(t("5319"),t("f152")),o=t("8403"),n=t("c28b"),r=t.n(n),u={name:"Profile",data:()=>({mailSending:!1,displayMenu:!1}),directives:{clickOutside:r.a.directive},components:{Preloader:l["a"]},computed:{user(){return this.$store.getters.user},userLoading(){return this.$store.getters.userLoading},noticesCount(){return this.$store.getters.noticesPagination.total},isDesktop(){return document.body.clientWidth>=1366},isMobile(){return!this.isDesktop},page(){let e;return this.$route.query["page"]?(e=Math.abs(parseInt(this.$route.query["page"])),1===e&&this.clearQueryParam("page")):e=1,0!==e&&Number.isInteger(e)||(e=1),e}},methods:{showDesktopMenu(){this.isDesktop&&(this.displayMenu=!0)},hideDesktopMenu(){this.isDesktop&&(this.displayMenu=!1)},toggleMobileMenu(){this.isMobile&&(this.displayMenu=!this.displayMenu)},hideMobileMenu(){this.isMobile&&(this.displayMenu=!1)},resendVerification(){this.mailSending=!0,o["a"].resendEmailVerification().then(()=>{this.$notify("Письмо с подтверждением отправлено на ваш E-mail.")}).catch(e=>{e.response&&429===e.response.status&&alert("Вы слишком часто просите переотправить Вам подтверждение. Повторите попытку позже.")}).finally(()=>{this.mailSending=!1})},clearQueryParam(e){if(void 0!==this.$route.query[e]){let i=Object.assign({},this.$route.query);delete i[e],this.$router.replace({query:i})}},loadNotices(){this.user.verifyed&&this.$store.dispatch("loadNotices",{page:"ProfileNotices"===this.$route.name?this.page:1})}},mounted(){this.$route.query["reload"]&&(this.clearQueryParam("reload"),setTimeout(()=>{location.reload()},400)),this.user?this.loadNotices():this.$onUserLoad.hook(()=>{this.loadNotices()})}},c=u,p=(t("9644"),t("2877")),d=Object(p["a"])(c,s,a,!1,null,"abe65eb2",null);i["default"]=d.exports}}]);