(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11e01098"],{"36a3":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile__information profile__contant tab-1"},[t.userLoading?i("preloader"):t.user?i("div",{staticClass:"profile__information-row"},[i("div",{staticClass:"profile__information-title"},[i("h2",{staticClass:"profile__information-title-h2"},[t._v(" Персональные данные "),i("span",{staticClass:"profile__information-span secondary",attrs:{title:"Ваш уникальный идентификатор"}},[t._v("#"+t._s(t.user.id))])]),i("span",{staticClass:"profile__information-title-confidentiality"},[t._v("Эти данные конфиденциальны. Только ты их видишь.")])]),i("div",{staticClass:"profile__information-body"},[i("div",{staticClass:"profile__information-body-row"},[i("info-item",{attrs:{title:"Имя",value:t.user.name,max:150},on:{change:function(e){return t.saveInfo("name",e)}}}),i("info-item",{attrs:{title:"Номер телефона",value:t.user.phone,phone:!0},on:{change:function(e){return t.saveInfo("phone",e)}}}),i("info-item",{ref:"emailinput",attrs:{title:"Эл. почта",value:t.user.email,email:!0},on:{change:function(e){return t.saveInfo("email",e)}}}),i("info-item",{attrs:{title:"Телеграм",value:t.user.telegram,max:32},on:{change:function(e){return t.saveInfo("telegram",e)}}})],1)]),i("div",{staticClass:"profile__information-button"},[i("button",{staticClass:"profile__information-button-text button-grand-black"},[t._v("Редактировать данные")]),i("button",{staticClass:"profile__information-button-text button-grand-black"},[t._v("Сохранить изменения")])])]):t._e()],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile__information-item"},[a("div",{staticClass:"profile__information-item-title"},[a("h2",{staticClass:"profile__information-item-title-text"},[t._v(t._s(t.title))])]),a("div",{staticClass:"profile__information-item-data"},[t.edit?a("div",{staticClass:"profile__information-item-data-value"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.localVal,expression:"localVal",modifiers:{trim:!0}},{name:"click-outside",rawName:"v-click-outside",value:t.offEditMode,expression:"offEditMode"},{name:"mask",rawName:"v-mask",value:t.mask,expression:"mask"}],ref:"input",staticClass:"profile__information-item-data-input",attrs:{type:"text"},domProps:{value:t.localVal},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.offEditMode(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.forceOffEditMode(e)},input:function(e){e.target.composing||(t.localVal=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"input-btn input-btn-save cursor",attrs:{title:"Сохранить изменения"},on:{click:t.offEditMode}},[t._v(" ✓ ")]),a("span",{staticClass:"input-btn input-btn-close cursor",attrs:{title:"Закрыть окно редактирования"},on:{click:t.forceOffEditMode}},[t._v(" × ")])]):a("div",{staticClass:"profile__information-item-data-info"},[a("p",{staticClass:"profile__information-item-data-text",on:{dblclick:t.onEditMode}},[this.phone?[t._v(" "+t._s(t._f("phone")(t.value))+" ")]:t.value?[t._v(" "+t._s(t.value)+" ")]:[t._v(" Пусто ")]],2),a("picture",{on:{click:t.onEditMode}},[a("source",{attrs:{srcset:i("3a51"),type:"image/webp"}}),a("img",{staticClass:"profile__information-item-data-text-change",attrs:{src:i("ae8f"),alt:""}})])]),t.errorMsg?a("div",{staticClass:"errors-box"},[a("span",{staticClass:"red"},[t._v(t._s(t.errorMsg))])]):t._e()])])},o=[],r=(i("a9e3"),i("5530")),l=i("c28b"),u=i("b5ae"),c={name:"InfoItem",props:{title:{type:String,required:!0},value:{required:!0},max:{type:Number},phone:{type:Boolean,default:!1},email:{type:Boolean,default:!1}},data:function(){return{edit:!1,localVal:null,errorMsg:null}},computed:{rules:function(){var t={};return this.max&&(t.maxLength=Object(u["maxLength"])(this.max)),this.phone&&(t.maxLength=Object(u["maxLength"])(10),t.minLength=Object(u["minLength"])(10)),this.email&&(t.email=u["email"]),t},mask:function(){return this.phone?{mask:"8 (999) 999-99-99"}:null}},methods:{onEditMode:function(){var t=this;this.edit=!0,this.$nextTick((function(){return t.focusInput()}))},offEditMode:function(){this.validate()&&(this.value!==this.localVal&&this.emitChange(),this.setBaseState())},forceOffEditMode:function(){this.setBaseState(),this.freshData()},setBaseState:function(){this.errorMsg=null,this.$v.$reset(),this.edit=!1},freshData:function(){this.localVal=this.value},focusInput:function(){this.$refs.input.focus()},emitChange:function(){this.$emit("change",this.localVal)},validate:function(){return this.$v.$touch(),!this.$v.$invalid||(this.setErrors(),!1)},setErrors:function(){this.$v.localVal.required?void 0===this.$v.localVal.maxLength||this.$v.localVal.maxLength?void 0===this.$v.localVal.minLength||this.$v.localVal.minLength?void 0===this.$v.localVal.email||this.$v.localVal.email||(this.errorMsg="Адрес должен быть в формате Email"):this.errorMsg="Количество символов не должно быть меньше, чем "+this.$v.localVal.$params.minLength.min:this.errorMsg="Количество символов не должно превышать "+this.$v.localVal.$params.maxLength.max:this.errorMsg="Это поле обязательно для заполнения."}},validations:function(){return{localVal:Object(r["a"])({required:u["required"]},this.rules)}},directives:{clickOutside:l["directive"]},mounted:function(){this.freshData()}},f=c,m=(i("7230"),i("2877")),d=Object(m["a"])(f,s,o,!1,null,"7ab2ac6a",null),v=d.exports,h=i("f152"),p={name:"ProfileInfo",title:"Мои данные",components:{Preloader:h["a"],InfoItem:v},computed:{user:function(){return this.$store.getters.user},userLoading:function(){return this.$store.getters.userLoading}},methods:{saveInfo:function(t,e){var i=this,a=!0,n=this.user[t];"email"===t&&(a=confirm("Вы точно хотите изменить email? После его изменения, его необходимо потвердить.")),a?(this.user[t]=e,this.$store.dispatch("saveUserInfo",{type:t,value:e}).then((function(){i.$notify("Новые данные сохранены!"),"email"===t&&setTimeout((function(){location.reload()}),800)})).catch((function(e){var a=!0;if(e.response&&e.response.data&&e.response.data["errors"]&&e.response.data["errors"]["email"]){var s=e.response.data["errors"]["email"][0];"The email has already been taken."===s&&(alert("Такой email уже занят."),i.user[t]=n,i.$refs["emailinput"].freshData(),a=!1)}a&&(alert("Произошла ошибка отправки формы. Повторите позже."),i.user[t]=n,i.$refs["emailinput"].freshData())}))):this.$refs["emailinput"].freshData()}}},A=p,_=Object(m["a"])(A,a,n,!1,null,null,null);e["default"]=_.exports},"3a51":function(t,e){t.exports="data:image/webp;base64,UklGRugAAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSI8AAAABcFXbdtQcCU/CkxAJSMABcUAdgIPWAXUQCZEQCZHwJDDP8B8RCtO2YZym+xIOyaU+6jGbl1885hakP+SQlTpJkzfkl1faXJvr/sWGZGkI5ug3n9euJtMfNv1h0x82/WHTH/Eu8bO2+h3Mrfsib6OGNuY4QNmbBccRtFTgEMArkSMkgPjdDwkdgMZ+VxYEAABWUDggMgAAAFADAJ0BKhkAGQA+iTSUSCUjIiE36ACgEQlpAACsbmkXPw5IAP7vsK8P+NqowBAO4AAA"},"4ab9":function(t,e,i){},7230:function(t,e,i){"use strict";i("4ab9")},ae8f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAAUVBMVEUAAACvr6+/v7+3t7e/v7+6urq/v7+7u7u8vLy/v7+9vb2/v7+9vb2/v7+9vb29vb29vb29vb2/v7++vr69vb2/v7++vr6+vr6+vr6+vr6+vr5qu/KUAAAAGnRSTlMAEBAgIDAwQFBfYG9wf4CPkJ+foK+vv8/f7/AMRU4AAACOSURBVCjPvdHNEoMgDEbRD7BosWp/KJC8/4N2kVEhpdve7RmSAYBOl8zJdYGCvacurIDlHsTiMGeYpRwFGYW1zOTxeI1HVgCI5AEe1HIAV/IA+Bc00kAtLVSi4BQNp6TbDi60Qn4/MZZGHMEtMkrJxERRdigZpuNHlFT9W+y3ZHmUzSgw8Sn3SKyitwWADzxMDBATBp/HAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-11e01098-legacy.b8cd461e.js.map